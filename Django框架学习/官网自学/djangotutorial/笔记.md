默认开启的某些应用需要至少一个数据表，所以，在使用它们之前需要在数据库中创建一些表。请执行以下命令： python manage.py migrate

为了在我们的工程中包含这个应用，我们需要在配置类INSTALLED_APPS中添加设置。因为PollsConfig类写在文件polls/apps.py中，所以它的点式路径是'polls.apps.PollsConfig'。在文件mysite/settings.py中子INSTALLED_APPS项添加点式路径后，它看起来像这样： **mysite/settings.py**

```python
INSTALLED_APPS = [
    "polls.apps.PollsConfig",
    "django.contrib.admin",
    "django.contrib.auth",
    "django.contrib.contenttypes",
    "django.contrib.sessions",
    "django.contrib.messages",
    "django.contrib.staticfiles",
]
```

现在你的 Django 项目会包含polls 应用。继续运行下面的命令： `python manage.py makemigrations polls`

通过运行makemigrations，您告诉 Django 您已对模型进行了一些更改（在本例中，您创建了新模型），并且您希望将这些更改存储为迁移。

迁移文件是 Django 存储模型（以及数据库模式）变更的方式——它们以文件的形式存储在磁盘上。您可以根据需要阅读新模型的迁移文件；它就是 `.migration.js` 文件polls/migrations/0001_initial.py。不用担心，Django 不需要每次都阅读迁移文件，但它们的设计允许人工编辑，以便您在需要手动调整 Django 的更改方式时使用。

Django 有一个自动执行数据库迁移并同步管理你的数据库结构的命令 - 这个命令是migrate，我们马上就会接触它 - 但首先，让我们看看迁移命令会执行哪些 SQL 语句。sqlmigrate 命令接收一个迁移的名称，然后返回对应的 SQL： `python manage.py sqlmigrate polls 0001`

该sqlmigrate命令实际上并不会在你的数据库上执行迁移操作，而是将迁移结果打印到屏幕上，以便你查看 Django 认为需要的 SQL 语句。这对于检查 Django 的迁移计划，或者当你的数据库管理员需要 SQL 脚本来进行更改时非常有用。

如果您有兴趣，还可以运行 ；这将检查您的项目中是否存在任何问题，而无需进行迁移或触及数据库。python manage.py check

现在，migrate再次运行以在数据库中创建这些模型表： `python manage.py migrate`

该migrate命令会获取所有尚未应用的迁移（Django 使用数据库中名为 `django_migrations` 的特殊表来跟踪哪些迁移已应用django_migrations），并针对数据库运行这些迁移——本质上是将您对模型所做的更改与数据库中的模式同步。

迁移功能非常强大，它允许您在项目开发过程中随时更改模型，而无需删除数据库或表并创建新的数据库或表——它专门用于在不丢失数据的情况下实时升级数据库。我们将在本教程的后续部分更深入地介绍迁移功能，但现在，请记住进行模型更改的三步指南：

1.  **更改您的模型（在models.py）。**
2.  **运行以创建这些更改的迁移python manage.py makemigrations**
3.  **运行此程序以将这些更改应用到数据库。python manage.py migrate**

之所以有单独的命令来创建和应用迁移，是因为你需要将迁移提交到版本控制系统并将其与应用程序一起发布；它们不仅使你的开发更容易，还可以被其他开发人员和生产环境使用。

# 介绍 Django 管理页面¶

设计哲学

为你的员工或客户生成一个用户添加、修改和删除后台内容是一项缺乏创意和兴趣的工作。因此，Django会根据模型创建后台界面。

Django 产生于一个公众页面和内容发布者页面完全分离的新闻类站点的开发过程中。站点管理人员使用管理系统来添加新闻、事件和体育时讯等，这些添加的内容被显示在公众页面上。Django 通过为站点管理人员创建统一的内容编辑界面解决了这个问题。

管理界面不是为了网站的访问者，而是为管理员准备的。

## 创建一个管理员账号

首先，我们要创建一个能够登录管理页面的用户。请运行下面的命令： `python manage.py createsuperuser`

键入您想要使用的用户名，然后按回车键： `Username: admin`

然后提示你输入想要使用的邮箱地址： `Email address: admin@example.com`

最后一步是输入密码。你会被要求输入两次密码，第二次的目的是为了确认输入的确实是你想要的密码。 我就搞成`**********`

```shell
Password: **********
Password (again): *********
Superuser created successfully.
```

启动开发服务器 Django 的管理界面默认是启用的。让我们启动服务器开发，看看它到底是怎样的。

如果开发服务器未启动，用以下命令启动它： `python manage.py runserver`

向管理页面中加入投票应用 但是我们的投票应用在哪里呢？它没有在索引页面里显示。

请求要再做一件事：我们得告诉管理，问题Question对象需要一个后台接口。打开polls/admin.py文件，把它编辑成下面这样：
```python
from django.contrib import admin
from .models import Question
admin.site.register(Question)
```

体验便捷的管理功能
现在我们向管理页面注册了问题Question类。Django知道它应该显示在索引页面里：
点击“问题”。现在看到的是问题“问题”对象的列表“更改列表”。这个界面会显示所有数据库里的问题问题对象，你可以选择一个来修改。现在有我们在上半部分这里创建的“What's up?” 问题。