https://fastapi.tiangolo.com/tutorial/query-params/

# 查询参数
当您声明不属于路径参数的其他函数参数时，它们会自动被解释为“查询”参数。
查询是 URL 中位于 <URL> 之后的一组键值对，以字符?分隔。&
例如，在 URL 中：
http://127.0.0.1:8000/items/?skip=0&limit=10



## 默认值
由于查询参数不是路径的固定组成部分，因此它们可以是可选的，并且可以具有默认值。
在上面的例子中，它们的默认值分别为skip=0和limit=10。
所以，访问以下网址：
http://127.0.0.1:8000/items/
相当于去：
http://127.0.0.1:8000/items/?skip=0&limit=10
但如果你去，例如：
http://127.0.0.1:8000/items/?skip=20
函数中的参数值将为：
skip=20因为你在网址中设置了它。
limit=10因为那是默认值



## 可选参数
同样，您可以通过设置其默认值来声明可选查询参数None：
```python
from fastapi import FastAPI

app = FastAPI()


@app.get("/items/{item_id}")
async def read_item(item_id: str, q: str | None = None):
    if q:
        return {"item_id": item_id, "q": q}
    return {"item_id": item_id}
```

## 查询参数类型转换
您还可以声明bool类型，它们将被转换：
```python
from fastapi import FastAPI

app = FastAPI()


@app.get("/items/{item_id}")
async def read_item(item_id: str, q: str | None = None, short: bool = False):
    item = {"item_id": item_id}
    if q:
        item.update({"q": q})
    if not short:
        item.update(
            {"description": "This is an amazing item that has a long description"}
        )
    return item
```
在这种情况下，如果您前往：
http://127.0.0.1:8000/items/foo?short=1
或者
http://127.0.0.1:8000/items/foo?short=True
或者
http://127.0.0.1:8000/items/foo?short=true
或者
http://127.0.0.1:8000/items/foo?short=on
或者
http://127.0.0.1:8000/items/foo?short=yes
或者任何其他大小写变体（大写、首字母大写等），您的函数将看到值为.的参数short。bool否则True为False.


# 多路径和查询参数
您可以同时声明多个路径参数和查询参数，FastAPI可以识别它们之间的区别。
而且，你不需要按任何特定顺序申报它们。
他们会被按姓名识别出来：
```python
from fastapi import FastAPI

app = FastAPI()


@app.get("/users/{user_id}/items/{item_id}")
async def read_user_item(
    user_id: int, item_id: str, q: str | None = None, short: bool = False
):
    item = {"item_id": item_id, "owner_id": user_id}
    if q:
        item.update({"q": q})
    if not short:
        item.update(
            {"description": "This is an amazing item that has a long description"}
        )
    return item
```

# 必需查询参数
当您为非路径参数声明默认值时（目前，我们只见过查询参数），则不需要这样做。
如果您不想添加特定值，而只是想将其设为可选，请将默认值设置为None。
但是，如果您想将查询参数设为必填项，只需不声明任何默认值即可：
```python
from fastapi import FastAPI

app = FastAPI()


@app.get("/items/{item_id}")
async def read_user_item(item_id: str, needy: str):
    item = {"item_id": item_id, "needy": needy}
    return item
```
这里查询参数needy是必需的查询参数，类型为str。
如果你在浏览器中打开类似这样的网址：
http://127.0.0.1:8000/items/foo-item

如果不添加所需的参数needy，您将看到类似这样的错误：
```json
{
  "detail": [
    {
      "type": "missing",
      "loc": [
        "query",
        "needy"
      ],
      "msg": "Field required",
      "input": null
    }
  ]
}
```
由于needy这是一个必填参数，您需要在 URL 中设置它：
http://127.0.0.1:8000/items/foo-item?needy=sooooneedy


当然，您可以将某些参数定义为必需参数，某些参数定义为具有默认值，而某些参数则完全是可选的：
```python
from fastapi import FastAPI

app = FastAPI()


@app.get("/items/{item_id}")
async def read_user_item(
    item_id: str, needy: str, skip: int = 0, limit: int | None = None
):
    item = {"item_id": item_id, "needy": needy, "skip": skip, "limit": limit}
    return item
```
在这种情况下，有 3 个查询参数：

needy，必需str。
skip，int默认值为0。
limit，一个可选的int。