https://fastapi.tiangolo.com/tutorial/

启动代码 ：fastapi dev main.py

控制台启动服务后，写代码时它会自动更新，不需要重启服务

默认端口：http://127.0.0.1:8000

自动生成api文档：http://127.0.0.1:8000/docs

```python
from fastapi import FastAPI

app = FastAPI()
# 路径参数
@app.get("/items/{item_id}")
# async def read_item(item_id):
async def read_item(item_id: int):
    return {"item_id": item_id}
```
会有检查，如果item_id不是int会返回json告诉你错了


# 路径冲突问题
创建路径操作时，您可能会遇到路径固定的情况。
例如/users/me，假设它是为了获取有关当前用户的数据。
然后，您还可以/users/{user_id}通过某个用户 ID 获取有关特定用户的数据。
由于路径操作是按顺序执行的，因此需要确保在声明/users/me路径之前先声明路径/users/{user_id}
```python
from fastapi import FastAPI

app = FastAPI()

@app.get("/users/me")
async def read_user_me():
    return {"user_id": "the current user"}

@app.get("/users/{user_id}")
async def read_user(user_id: str):
    return {"user_id": user_id}
```
否则，路径/users/{user_id}也会匹配/users/me，因为它“认为”它接收到的参数user_id值为"me"

不能重新定义路径操作：
```python
from fastapi import FastAPI

app = FastAPI()


@app.get("/users")
async def read_users():
    return ["Rick", "Morty"]


@app.get("/users")
async def read_users2():
    return ["Bean", "Elfo"]
```
由于路径首先匹配，因此将始终使用第一个路径。


# 预定义值
如果你有一个接收路径参数的路径操作，但你希望预定义可能的有效路径参数值，你可以使用标准的 Python 操作。
创建一个Enum类
导入并创建一个继承自和 的Enum子类。strEnum
通过继承strAPI 文档，就能知道值必须是某种类型string，并能够正确渲染。
然后创建具有固定值的类属性，这些固定值将作为可用的有效值：
```python
from enum import Enum

from fastapi import FastAPI


class ModelName(str, Enum):
    alexnet = "alexnet"
    resnet = "resnet"
    lenet = "lenet"


app = FastAPI()


@app.get("/models/{model_name}")
async def get_model(model_name: ModelName):
    if model_name is ModelName.alexnet:
        return {"model_name": model_name, "message": "Deep Learning FTW!"}
    
    # 您可以使用以下方法获取实际值（str本例中为 a） ：model_name.value或者一般情况下，使用your_enum_member.value
    # "lenet"您也可以使用以下方式访问该值ModelName.lenet.value
    if model_name.value == "lenet":
        return {"model_name": model_name, "message": "LeCNN all the images"}

    return {"model_name": model_name, "message": "Have some residuals"}
```

# 包含路径的路径参数
假设你有一个路径操作，路径是 /files/{file_path}。
但是你需要 file_path 本身包含一个路径，比如 home/johndoe/myfile.txt。
那么，该文件的 URL 类似于：/files/home/johndoe/myfile.txt。

OpenAPI 不支持声明路径参数以包含内部路径，因为这可能会导致难以测试和定义的场景。
不过，您仍然可以使用 Starlette 的内部工具之一在FastAPI中完成此操作。
文档仍然有效，尽管不会添加任何说明参数应包含路径的文档。

路径转换器
直接使用 Starlette 的选项，您可以声明一个包含路径的路径参数，例如使用 URL：
`/files/{file_path:path}`
在这种情况下，参数的名称是file_path，最后一部分，:path告诉它该参数应该匹配任何路径。
所以，你可以将它与以下方式一起使用：
```python
from fastapi import FastAPI

app = FastAPI()


@app.get("/files/{file_path:path}")
async def read_file(file_path: str):
    return {"file_path": file_path}
```